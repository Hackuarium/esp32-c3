<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="icon" type="image/png" href="../icon/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="../icon/favicon.svg" />
<link rel="shortcut icon" href="../icon/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="../icon/apple-touch-icon.png" />
<meta name="apple-mobile-web-app-title" content="2025" />
<link rel="manifest" href="../icon/site.webmanifest" />

    <link href="style.css" rel="stylesheet" />
    <title>Christmas Lights Control</title>
    <script>
      function openTab(evt, tabName) {
        let command = evt.currentTarget.getAttribute("data-program");
        const tabcontent = document.getElementsByClassName("tabcontent");
        for (let i = 0; i < tabcontent.length; i++) {
          tabcontent[i].style.display = "none";
        }
        const tablinks = document.getElementsByClassName("tablinks");
        for (let i = 0; i < tablinks.length; i++) {
          tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        document.getElementById(tabName).style.display = "block";
        evt.currentTarget.className += " active";

        if (command) {
          pixels.sendSlowlyCommand(command);
        }
      }
    </script>
  </head>

  <body>
    <div class="container">
      <h1 class="main-title">üéÑ Christmas Lights üéÑ</h1>
      
      <div class="tab">
        <button data-program="BB2,BC2,BD11,BF3" class="tablinks" onclick="openTab(event, 'LineMode')">
          <span class="icon">üí´</span> Line Mode
        </button>
        <button class="tablinks" data-program="BB4,BC18,BD1,BG2" onclick="openTab(event, 'RainMode')">
          <span class="icon">üåßÔ∏è</span> Rain Mode
        </button>
        <button class="tablinks" data-program="BB1,BC19,BD3,BF2,BG7,BO5" onclick="openTab(event, 'CometMode')">
          <span class="icon">‚òÑÔ∏è</span> Comet Mode
        </button>
        <button class="tablinks" onclick="openTab(event, 'Disco')" data-only-http>
          <span class="icon">üéµ</span> Disco
        </button>
        <button class="tablinks" onclick="openTab(event, 'Advanced')" data-only-http>
          <span class="icon">‚öôÔ∏è</span> Advanced
        </button>
      </div>
      <div id="LineMode" class="tabcontent">
        <section class="control-section">
          <h2>üé® Select Color Model</h2>
          <div class="preset-grid" id="models"></div>
        </section>

  

        <section class="control-section">
          <h2>‚ö° Effect Controls</h2>
          <div class="slider-group">
            <div class="color-slider" data-only-http>
              <label>Brightness</label>
              <div class="slider-with-value">
                <input data-label="BA" type="range" min="0" max="255" />
                <span class="slider-value"></span>
              </div>
            </div>
            <div class="color-slider">
              <label>Animation Speed</label>
              <div class="slider-with-value" data-only-http>
                <input data-label="BC" type="range" min="0" max="20" />
                <span class="slider-value"></span>
              </div>
              <div class="slider-with-value" data-only-mqtt>
                <input data-label="BC" type="range" min="0" max="6" />
                <span class="slider-value"></span>
              </div>
            </div>
            <div class="color-slider">
              <label>Color Length</label>
              <div class="slider-with-value">
                <input data-label="BB" type="range" min="0" max="7" />
                <span class="slider-value"></span>
              </div>
            </div>
          </div>
        </section>

              <section class="control-section">
          <h2>üéØ Custom Colors</h2>
          <div class="color-picker-group">
            <div class="master-color">
              <label>Change all colors at once:</label>
              <input type="color" data-label="BP,BQ,BR,BS,BV,BW,BX,BY" class="master-picker" />
            </div>
            <label>or select individually the 8 colors:</label>
            <div class="individual-colors">
              <div class="color-item">
                <input type="color" data-label="BP" />
                <span>1</span>
              </div>
              <div class="color-item">
                <input type="color" data-label="BQ" />
                <span>2</span>
              </div>
              <div class="color-item">
                <input type="color" data-label="BR" />
                <span>3</span>
              </div>
              <div class="color-item">
                <input type="color" data-label="BS" />
                <span>4</span>
              </div>
              <div class="color-item">
                <input type="color" data-label="BV" />
                <span>5</span>
              </div>
              <div class="color-item">
                <input type="color" data-label="BW" />
                <span>6</span>
              </div>
              <div class="color-item">
                <input type="color" data-label="BX" />
                <span>7</span>
              </div>
              <div class="color-item">
                <input type="color" data-label="BY" />
                <span>8</span>
              </div>
            </div>
          </div>
        </section>
      </div>
      <div id="RainMode" class="tabcontent">
        <section class="control-section">
          <h2>üåü Preset Effects</h2>
          <div class="preset-grid">
            <button class="preset-button" onclick="pixels.sendSlowlyCommand('BB2,17,1,7,10,1,BK0,128,9,BO2')">
              <span class="icon">üéÑ</span> Green Christmas
            </button>
            <button class="preset-button" onclick="pixels.sendSlowlyCommand('BB2,17,1,7,2,0,BK255,255,255,BO2')">
              <span class="icon">‚ùÑÔ∏è</span> White Christmas
            </button>
            <button class="preset-button" onclick="pixels.sendSlowlyCommand('BB1,17,1,17,1,0,BK0,17,255,BO2')">
              <span class="icon">üí´</span> Blue Magic
            </button>
            <button class="preset-button" onclick="pixels.sendSlowlyCommand('BB5,20,1,0,10,6,BK255,255,255')">
              <span class="icon">‚ö°</span> White Flash
            </button>
            <button class="preset-button" onclick="pixels.sendSlowlyCommand('BB4,17,1,7,2,2,BK0,0,0,BO2')">
              <span class="icon">‚òîÔ∏è</span> Color rain
            </button>
             <button class="preset-button" onclick="pixels.sendSlowlyCommand('BB3,17,1,8,2,1,BK0,0,0,BO2')">
              <span class="icon">Ô∏èüé®</span> Painting  
            </button>
          </div>
        </section>

        <section class="control-section">
          <h2>üé® Color Selection</h2>
          <div data-only-http>
            <select data-label="BE" class="color-select">
              <option value="0">Fixed</option>
              <option value="1">Orangish</option>
              <option value="2">Random orangish</option>
              <option value="3">Greenish</option>
              <option value="4">Random greenish</option>
              <option value="5">Violetish</option>
              <option value="6">Random violetish</option>
              <option value="7">Rainbow</option>
              <option value="8">Random rainbow</option>
              <option value="9">Random</option>
              <option value="16">Black</option>
              <option value="17">Red</option>
              <option value="18">Green</option>
              <option value="19">Yellow</option>
              <option value="20">Blue</option>
              <option value="21">Violet</option>
              <option value="22">Cyan</option>
              <option value="23">White</option>
            </select>
          </div>
          <div class="color-controls" data-only-mqtt>
            <button class="color-button random-orangish" onclick="pixels.sendSlowlyCommand('BE2')">Orangish</button>
            <button class="color-button random-greenish" onclick="pixels.sendSlowlyCommand('BE4')">Greenish</button>
            <button class="color-button random-violetish" onclick="pixels.sendSlowlyCommand('BE6')">Violetish</button>
            <button class="color-button rainbow" onclick="pixels.sendSlowlyCommand('BE7')">Rainbow</button>
            <button class="color-button random" onclick="pixels.sendSlowlyCommand('BE9')">Random</button>
            <button class="color-button red" onclick="pixels.sendSlowlyCommand('BE17')">Red</button>
            <button class="color-button green" onclick="pixels.sendSlowlyCommand('BE18')">Green</button>
            <button class="color-button yellow" onclick="pixels.sendSlowlyCommand('BE19')">Yellow</button>
            <button class="color-button blue" onclick="pixels.sendSlowlyCommand('BE20')">Blue</button>
            <button class="color-button violet" onclick="pixels.sendSlowlyCommand('BE21')">Violet</button>
            <button class="color-button cyan" onclick="pixels.sendSlowlyCommand('BE22')">Cyan</button>
            <button class="color-button white" onclick="pixels.sendSlowlyCommand('BE23')">White</button>
          </div>
        </section>
        <section class="control-section">
            <h2>‚öôÔ∏è Effect Controls</h2>
            <div class="slider-group">
              <div class="control-group">
                <h3>Color Animation</h3>
                <div class="color-slider">
                  <label>Color Change Speed</label>
                  <div class="slider-with-value">
                    <input data-label="BF" type="range" min="0" max="10" />
                    <span class="slider-value"></span>
                  </div>
                </div>
                <div class="color-slider" data-only-http>
                <label>Brightness</label>
                <div class="slider-with-value">
                  <input data-label="BA" type="range" min="0" max="255" />
                  <span class="slider-value"></span>
                </div>
              </div>
              </div>
  
              <div class="control-group">
                <h3>Animation Settings</h3>
                <div class="color-slider">
                  <label>Number of Events</label>
                  <div class="slider-with-value">
                    <input data-label="BB" type="range" min="0" max="7" />
                    <span class="slider-value"></span>
                  </div>
                </div>
                                <div class="color-slider">
                  <label>Fading Speed</label>
                  <div class="slider-with-value">
                    <input data-label="BG" type="range" min="0" max="10" />
                    <span class="slider-value"></span>
                  </div>
                </div>
              </div>
  
              <div class="background-control">
                <h3>Background Color</h3>
                <div class="color-squares" data-only-mqtt>
                  <button class="color-square black" onclick="pixels.sendSlowlyCommand('BK0,0,0,0')"></button>
                  <button class="color-square red" onclick="pixels.sendSlowlyCommand('BK255,0,0')"></button>
                  <button class="color-square green" onclick="pixels.sendSlowlyCommand('BK0,255,0')"></button>
                  <button class="color-square blue" onclick="pixels.sendSlowlyCommand('BK0,0,255')"></button>
                  <button class="color-square yellow" onclick="pixels.sendSlowlyCommand('BK255,255,0')"></button>
                  <button class="color-square violet" onclick="pixels.sendSlowlyCommand('BK255,0,255')"></button>
                  <button class="color-square cyan" onclick="pixels.sendSlowlyCommand('BK0,255,255')"></button>
                  <button class="color-square white" onclick="pixels.sendSlowlyCommand('BK255,255,255')"></button>
                </div>
                 <div data-only-http>
                  <input type="color" data-rgb="true" data-label="BK,BL,BM" class="background-picker" />
                </div> 
                <div class="color-slider" data-only-http>
                  <label>Background Brightness</label>
                  <div class="slider-with-value">
                    <input data-label="BH" type="range" min="0" max="255" />
                    <span class="slider-value"></span>
                  </div>
                </div>
              </div>
              </div>
       
          </section>
        </div>
        <div id="CometMode" class="tabcontent">
            <section class="control-section">
              <h2>‚ú® Preset Effects</h2>
              <div class="preset-grid">
                <button class="preset-button" onclick="pixels.sendSlowlyCommand('BB3,20,3,9,4,8,BK0,0,0,BO5')">
                  <span class="icon">üå†</span>Crossing small 
                </button>
                <button class="preset-button" onclick="pixels.sendSlowlyCommand('BB0,19,3,17,5,5,BK0,255,17,BO1')">
                  <span class="icon">üå≤</span> Green Background
                </button>
              </div>
            </section>
    
            <section class="control-section">
              <h2>üé® Color Selection</h2>
              <div data-only-http>
                <select data-label="BE" class="color-select">
                  <option value="0">Fixed</option>
                  <option value="1">Orangish</option>
                  <option value="2">Random orangish</option>
                  <option value="3">Greenish</option>
                  <option value="4">Random greenish</option>
                  <option value="5">Violetish</option>
                  <option value="6">Random violetish</option>
                  <option value="7">Rainbow</option>
                  <option value="8">Random rainbow</option>
                  <option value="9">Random</option>
                  <option value="16">Black</option>
                  <option value="17">Red</option>
                  <option value="18">Green</option>
                  <option value="19">Yellow</option>
                  <option value="20">Blue</option>
                  <option value="21">Violet</option>
                  <option value="22">Cyan</option>
                  <option value="23">White</option>
                </select>
              </div>
              <div class="color-controls" data-only-mqtt>
                <button class="color-button random-orangish" onclick="pixels.sendSlowlyCommand('BE2')">Orangish</button>
                <button class="color-button random-greenish" onclick="pixels.sendSlowlyCommand('BE4')">Greenish</button>
                <button class="color-button random-violetish" onclick="pixels.sendSlowlyCommand('BE6')">Violetish</button>
                <button class="color-button rainbow" onclick="pixels.sendSlowlyCommand('BE7')">Rainbow</button>
                <button class="color-button random" onclick="pixels.sendSlowlyCommand('BE9')">Random</button>
                <button class="color-button red" onclick="pixels.sendSlowlyCommand('BE17')">Red</button>
                <button class="color-button green" onclick="pixels.sendSlowlyCommand('BE18')">Green</button>
                <button class="color-button yellow" onclick="pixels.sendSlowlyCommand('BE19')">Yellow</button>
                <button class="color-button blue" onclick="pixels.sendSlowlyCommand('BE20')">Blue</button>
                <button class="color-button violet" onclick="pixels.sendSlowlyCommand('BE21')">Violet</button>
                <button class="color-button cyan" onclick="pixels.sendSlowlyCommand('BE22')">Cyan</button>
                <button class="color-button white" onclick="pixels.sendSlowlyCommand('BE23')">White</button>
              </div>
            </section>
    
            <section class="control-section">
                <h2>‚öôÔ∏è Effect Controls</h2>
                <div class="slider-group">
                  <div class="color-slider" data-only-http>
                    <label>Brightness</label>
                    <div class="slider-with-value">
                      <input data-label="BA" type="range" min="0" max="255" 
                             oninput="pixels.sendSlowlyCommand('BA'+value)" />
                      <span class="slider-value"></span>
                    </div>
                  </div>
      
                  <div class="control-group">
                    <h3>Color Animation</h3>
                    <div class="color-slider">
                      <label>Color Change Speed</label>
                      <div class="slider-with-value">
                        <input data-label="BF" type="range" min="0" max="10" />
                        <span class="slider-value"></span>
                      </div>
                    </div>
                    <div class="color-slider">
                      <label>Fading Speed</label>
                      <div class="slider-with-value">
                        <input data-label="BG" type="range" min="0" max="10" />
                        <span class="slider-value"></span>
                      </div>
                    </div>
                  </div>
      
                  <div class="control-group">
                    <h3>Animation Settings</h3>
                    <div class="color-slider">
                      <label>Number of Events</label>
                      <div class="slider-with-value">
                        <input data-label="BB" type="range" min="0" max="7" />
                        <span class="slider-value"></span>
                      </div>
                    </div>
                    <div class="color-slider">
                      <label>Animation Speed</label>
                      <div class="slider-with-value">
                        <input data-label="BC" type="range" min="0" max="20" />
                        <span class="slider-value"></span>
                      </div>
                    </div>
                  </div>
      
                  <div class="direction-control">
                    <h3>Direction</h3>
                    <select data-label="BO" class="direction-select">
                      <option value="1">Left to Right</option>
                      <option value="2">Right to Left</option>
                      <option value="5">Horizontal</option>
                    </select>
                  </div>
                <div class="background-control">
                <h3>Background Color</h3>
                <div class="color-squares" data-only-mqtt>
                  <button class="color-square black" onclick="pixels.sendSlowlyCommand('BK0,0,0,0')"></button>
                  <button class="color-square red" onclick="pixels.sendSlowlyCommand('BK255,0,0')"></button>
                  <button class="color-square green" onclick="pixels.sendSlowlyCommand('BK0,255,0')"></button>
                  <button class="color-square blue" onclick="pixels.sendSlowlyCommand('BK0,0,255')"></button>
                  <button class="color-square yellow" onclick="pixels.sendSlowlyCommand('BK255,255,0')"></button>
                  <button class="color-square violet" onclick="pixels.sendSlowlyCommand('BK255,0,255')"></button>
                  <button class="color-square cyan" onclick="pixels.sendSlowlyCommand('BK0,255,255')"></button>
                  <button class="color-square white" onclick="pixels.sendSlowlyCommand('BK255,255,255')"></button>
                </div>
                 <div data-only-http>
                  <input type="color" data-rgb="true" data-label="BK,BL,BM" class="background-picker" />
                </div> 
              </div>
              </section>
            </div>
            <div id="Disco" class="tabcontent">
                <section class="control-section">
                  <h2>üéµ Disco Effects</h2>
                  <div class="preset-grid">
                    <button class="preset-button" onclick="pixels.sendSlowlyCommand('BB6,18,1,7,4,10,BK127,63,0,BO1')">
                      <span class="icon">‚ö°</span> Rain Fast
                    </button>
                    <button class="preset-button" onclick="pixels.sendSlowlyCommand('BB5,18,1,7,3,8,BK127,63,0,BO1')">
                      <span class="icon">üí´</span> Rain Medium
                    </button>
                    <button class="preset-button" onclick="pixels.sendSlowlyCommand('BB4,18,1,7,3,3,BK127,63,0,BO1')">
                      <span class="icon">üåßÔ∏è</span> Rain Slow
                    </button>
                    <button class="preset-button" onclick="pixels.sendSlowlyCommand('BB7,20,11,7,10,7,BK127,63,0,BO1')">
                      <span class="icon">üåà</span> Color Line Slow
                    </button>
                    <button class="preset-button" onclick="pixels.sendSlowlyCommand('BB4,20,11,7,10,7,BK127,63,0,BO1')">
                      <span class="icon">‚ÜïÔ∏è</span> Line Up Down
                    </button>
                    <button class="preset-button" onclick="pixels.sendSlowlyCommand('BB2,20,11,0,10,6,0,1,800,255,255,255,0,1')">
                      <span class="icon">üé®</span> Color Line Fast
                    </button>
                    <button class="preset-button" onclick="pixels.sendSlowlyCommand('BB7,20,1,0,10,9,0,1,800,255,255,255,0,1')">
                      <span class="icon">‚ö°</span> Strobe Fast
                    </button>
                    <button class="preset-button" onclick="pixels.sendSlowlyCommand('BB7,19,1,0,10,8,0,1,800,255,255,255,0,1')">
                      <span class="icon">‚ú®</span> Strobe Medium
                    </button>
                    <button class="preset-button" onclick="pixels.sendSlowlyCommand('BB7,16,1,0,10,6,0,1,800,255,255,255,0,1')">
                      <span class="icon">üåü</span> Strobe Slow
                    </button>
                    <button class="preset-button" onclick="pixels.sendSlowlyCommand('BB7,20,11,7,10,7,BK127,63,0,BO1')">
                      <span class="icon">üåà</span> Rainbow
                    </button>
                  </div>
                </section>
              </div>

              <div id="Advanced" class="tabcontent">
                <section class="control-section">
                  <h2>‚öôÔ∏è Advanced Configuration</h2>
                  
                  <div class="config-group">
                    <div class="input-row">
                      <label>Number of Rows:</label>
                      <input data-label="BI" type="number" min="0" max="255" class="number-input" />
                    </div>
                    <div class="input-row">
                      <label>LEDs per Row:</label>
                      <input data-label="BJ" type="number" min="0" max="255" class="number-input" />
                    </div>
                  </div>
        
                  <div class="button-grid">
                    <button class="control-button" onmousedown="pixels.sendSlowlyCommand('h')">
                      <span class="icon">‚ùì</span> Help
                    </button>
                    <button class="control-button" onmousedown="pixels.sendSlowlyCommand('s')">
                      <span class="icon">‚öôÔ∏è</span> Settings
                    </button>
                    <button class="control-button" onmousedown="pixels.getCurrentSettings()">
                      <span class="icon">üìä</span> Current Settings
                    </button>
                    <button class="control-button" onmousedown="pixels.getSchedule()">
                      <span class="icon">üìÖ</span> Schedule
                    </button>
                    <button class="control-button" onmousedown="pixels.getCurrentLineColor()">
                      <span class="icon">üé®</span> Current Line Color
                    </button>
                  </div>
        
                  <div class="command-section">
                    <h3>üîß Custom Command</h3>
                    <form class="input-row">
                      <input type="text" class="command-input" name="command" placeholder="Enter command..." />
                      <button type="submit" class="submit-button" onclick="event.preventDefault(); pixels.sendSlowlyCommand(this.form.command.value);">
                        Send Command
                      </button>
                    </form>
                    <textarea class="result-display" id="result" rows="10" cols="80"></textarea>
                  </div>
        
                  <div class="help-section">
                    <pre class="help-text">
CA: NEO_RGB: 6 - NEO_GRB: 82
CB: 1 day, 2 night, 3 day+night
CC: Sunset offset
CD: Sunrise offset
CE,CF,CG,CH,CI,CJ,CK,CL: Minute event: 
- &lt;0 no action
- (quarter &lt;&lt; 8) + intensity 
CS: Wifi mode - 0: STA, 1: AP, 2: STA 30s then AP
                    </pre>
                    <div class="command-section">
                    <h3>üßÆ Schedule calculator</h3>
                    <form class="input-row">
                      <input type="text" class="command-input" id="quarter" onchange="calculateSchedule()" placeholder="Quarter of the day" />
                      <input type="text" class="command-input" id="intensity" onchange="calculateSchedule()" placeholder="Intensity" />
                      <input type="text" class="command-input" id="schedule" placeholder="Result" readonly />
                    </form>
                  </div>

                  </div>
                </section>
              </div>
       
<script>
  function calculateSchedule() {
    const quarter = parseInt(document.getElementById("quarter").value);
    const intensity = parseInt(document.getElementById("intensity").value);
    const schedule = (quarter << 8) + intensity;
    document.getElementById("schedule").value = schedule;
  }
</script>              

              <script type="module">
                import { Pixels } from "./pixels.js";
                const pixels = new Pixels();
                window.pixels = pixels;
                const parameters = await pixels.getParameters();
        
                const models = [
                  [0x000, 0x000, 0x000, 0x000, 0x000, 0x000, 0x000, 0x000],
                  [0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff, 0xfff],
                  [0xf00, 0xf00, 0xf00, 0xf00, 0xf00, 0xf00, 0xf00, 0xf00],
                  [0x0f0, 0x0f0, 0x0f0, 0x0f0, 0x0f0, 0x0f0, 0x0f0, 0x0f0],
                  [0x00f, 0x00f, 0x00f, 0x00f, 0x00f, 0x00f, 0x00f, 0x00f],
                  [0xf0f, 0xf0f, 0xf0f, 0xf0f, 0xf0f, 0xf0f, 0xf0f, 0xf0f],
                  [0x0ff, 0x0ff, 0x0ff, 0x0ff, 0x0ff, 0x0ff, 0x0ff, 0x0ff],
                  [0xff0, 0xff0, 0xff0, 0xff0, 0xff0, 0xff0, 0xff0, 0xff0],
                  [0x00f, 0x00f, 0x00f, 0x00f, 0xf00, 0xf00, 0xf00, 0xf00],
                  [0x0f0, 0x00f, 0x00f, 0x00f, 0xf00, 0xf00, 0xf00, 0x0f0],
                  [0xf70, 0xf00, 0xf00, 0xfff, 0xf10, 0xf00, 0xf40, 0xf60],
                  [0xf70, 0xf00, 0xf00, 0x000, 0xf10, 0xf00, 0xfd0, 0xf60],
                  [0x01f, 0x08f, 0x04f, 0xfff, 0x0ef, 0xfff, 0x09f, 0x00f],
                  [0x0f1, 0x0f0, 0xf00, 0x0f5, 0x0f0, 0xf00, 0xfff, 0xf00],
                  [0xf00, 0xf0f, 0x20f, 0x0af, 0x0fb, 0x6f0, 0xfd0, 0xf70],
                  [0xf00, 0xf0f, 0xf0f, 0x50f, 0x80f, 0x90f, 0xe0f, 0xf0c],
                  [0x0f1, 0x0f0, 0xf00, 0x0f5, 0x0f0, 0x0f1, 0x01f, 0x4f0],
                ];
                pixels.addColorModelsButtons(models);
        
                const bd = parameters.find((p) => p.code === "BD") || { value: 1 };
                const element = document.querySelector('[data-program*="BD' + bd.value + ',"]');
                element?.click();

                // after 5 minutes we remove the page and add a button to reload it
                // center the button in the middle of the page
                setTimeout(() => {
                  document.body.innerHTML = '<button onclick="location.reload()">Your session as expired, please reload the page a little bit later</button>';
                }, 60 * 5 * 1000);
              </script>
            </div>
          </body>
        </html>
        
        
      
    
  


