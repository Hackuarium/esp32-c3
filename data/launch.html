<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="style.css" rel="stylesheet" />
    <script>
      const prefix = "";
    </script>
    <script src="index.js"></script>
  </head>

  <style>
    button {
      border: 2px solid white;
    }
  </style>

  <body style="zoom: 1.5">
    <div class="flex flex-wrap">
      <button
        class="text-xl w-1/2 h-16 text-white bg-green-600"
        onmousedown="sendCommand('R-10,1000').then( () => reloadSettings())"
      >
        Start logging (10s, 100/s)
      </button>
      <button
        class="text-xl w-1/2 h-16 text-white bg-green-600"
        onmousedown="sendCommand('R-10,6000').then( () => reloadSettings())"
      >
        Start logging (60s, 100/s)
      </button>
      <button
        class="text-xl w-1/2 h-16 text-white bg-green-600"
        onmousedown="sendCommand('R1,300').then( () => reloadSettings())"
      >
        Start logging (300s, 1/s)
      </button>
      <button
        class="text-xl w-1/2 h-16 text-white bg-green-600"
        onmousedown="sendCommand('R1,6000').then( () => reloadSettings())"
      >
        Start logging (3600s, 1/s)
      </button>
      <button
        class="text-xl w-1/2 h-16 text-white bg-blue-600"
        onmousedown="sendCommand('S0').then( () => reloadSettings())"
      >
        Stop logging
      </button>
      <button
        class="text-xl w-1/2 h-16 text-white bg-red-600"
        onmousedown="if (confirm('Are you sure you want to delete all existing logs?')) sendCommand('S-32768')"
      >
        Delete logs
      </button>
      <button
        class="text-xl w-1/2 h-16 text-white bg-blue-600"
        onmousedown="fetchLogs();"
      >
        Retrieve logs
      </button>
      <button
        class="text-xl w-1/2 h-16 text-white bg-blue-600"
        onmousedown="sendCommand('R-10,0,0,16').then( () => reloadSettings())"
      >
        Reset parameters
      </button>
    </div>

    <div class="flex flex-wrap">
      <span class="w-1/2">Inter log delay (negative in ms)</span>
      <span
        ><input type="text" data-label="R" onchange="changeParameter(this)"
      /></span>
    </div>
    <div class="flex flex-wrap">
      <span class="w-1/2">Number of logs</span>
      <span><input type="text" data-label="S" /></span>
    </div>
    <div class="flex flex-wrap">
      <span class="w-1/2">First parameter to log</span>
      <span><input type="text" data-label="T" /></span>
    </div>
    <div class="flex flex-wrap">
      <span class="w-1/2">Last parameter to log</span>
      <span><input type="text" data-label="U" /></span>
    </div>

    <div>
      <div class="text-2xl bg-blue-600 w-full text-white text-center">
        Advanced
      </div>

      <button class="border-2 border-black" onmousedown="sendCommand('h')">
        Help
      </button>
      <button class="border-2 border-black" onmousedown="sendCommand('s')">
        Settings
      </button>
      <button class="border-2 border-black" onmousedown="getCurrentSettings()">
        Current settings
      </button>
      <h1>Advanced</h1>
      <form>
        <input type="text" class="border-2 border-black" name="command" />
        <input
          type="submit"
          onclick="event.preventDefault(); sendCommand(this.form.command.value);"
        />
      </form>

      <textarea class="border-2 border-black" id="result" rows="10" cols="40">
      </textarea>
    </div>
  </body>

  <script>
    async function fetchLogs() {
      const response = await fetch("/log.txt");
      const text = await response.text();
      document.getElementById("result").value = text;
    }
  </script>
</html>
